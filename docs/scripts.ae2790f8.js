parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"cMOQ":[function(require,module,exports) {
"use strict";function t(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=e(t))){var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,l=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return l=t.done,t},e:function(t){a=!0,i=t},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function e(t,e){if(t){if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.initialize=r,exports.draw_polygon=i,exports.draw_polygons=l,exports.draw_point=a,exports.draw_points=f,exports.draw_line=c,exports.draw_lines=s,exports.draw_force=y;var o=null;function r(t){o=t}function i(e,n){n=n||{},o.fillStyle=n.fillStyle||"slategrey",o.strokeStyle=n.strokeStyle||"black",o.lineWidth=n.lineWidth||1,o.beginPath(),o.moveTo(e.points[0].x,e.points[0].y);var r,i=t(e.points);try{for(i.s();!(r=i.n()).done;){var l=r.value;o.lineTo(l.x,l.y)}}catch(y){i.e(y)}finally{i.f()}if(o.closePath(),o.fill(),o.stroke(),n.debug){if(o.strokeStyle="red",o.lineWidth=1,e.normals){var f,c=t(e.normals);try{for(c.s();!(f=c.n()).done;){var s=f.value;o.beginPath(),o.moveTo(s.point.x,s.point.y),o.lineTo(s.point.x+10*s.normal.x,s.point.y+10*s.normal.y),o.stroke()}}catch(y){c.e(y)}finally{c.f()}}a(e.centroid)}}function l(e,n){var o,r=t(e);try{for(r.s();!(o=r.n()).done;){i(o.value,n)}}catch(l){r.e(l)}finally{r.f()}}function a(t,e){if(t){e=e||{},o.fillStyle=e.fillStyle||"red";var n=e.radius||3;o.beginPath(),o.arc(t.x,t.y,n,0,2*Math.PI),o.fill()}}function f(e,n){if(e){var o,r=t(e);try{for(r.s();!(o=r.n()).done;){a(o.value,n)}}catch(i){r.e(i)}finally{r.f()}}}function c(t,e){t&&(e=e||{},o.strokeStyle=e.strokeStyle||"black",o.lineWidth=e.lineWidth||3,o.beginPath(),o.moveTo(t.v1.x,t.v1.y),o.lineTo(t.v2.x,t.v2.y),o.stroke())}function s(e,n){if(e){var o,r=t(e);try{for(r.s();!(o=r.n()).done;){c(o.value,n)}}catch(i){r.e(i)}finally{r.f()}}}function y(t,e){if(t){e=e||{},o.strokeStyle=e.strokeStyle||"blue",o.lineWidth=e.lineWidth||1,o.beginPath(),o.moveTo(t.location.x,t.location.y);var n=2*Math.log(t.force.x);n===-1/0||n===1/0?n=0:isNaN(n)&&(n=-2*Math.log(-1*t.force.x));var r=2*Math.log(t.force.y);r===-1/0||r===1/0?r=0:isNaN(r)&&(r=-2*Math.log(-1*t.force.y)),o.lineTo(t.location.x+n,t.location.y+r),o.stroke(),a(t.location,{radius:1,fillStyle:"black"})}}
},{}],"FCax":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toDeg=exports.toRad=void 0;var e=Math.PI/180;exports.toRad=e;var t=180/Math.PI;exports.toDeg=t;
},{}],"R1yr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector=void 0;var t=require("./constants");function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var r=function(){function n(t,i){e(this,n),this.x=t,this.y=i}return i(n,[{key:"add",value:function(t){return new n(this.x+t.x,this.y+t.y)}},{key:"scale",value:function(t){return new n(this.x*t,this.y*t)}},{key:"dot",value:function(t){return this.x*t.x+t.y*this.y}},{key:"cross",value:function(t){return this.x*t.y-t.x*this.y}},{key:"normalize",value:function(){var t=this.len();return new n(this.x/t,this.y/t)}},{key:"lenSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"len",value:function(){return Math.sqrt(this.lenSq())}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)*t.toDeg}},{key:"rotate",value:function(e){e=t.toRad*e,this.x=Math.cos(e)*this.x-Math.sin(e)*this.y,this.y=Math.sin(e)*this.x+Math.cos(e)*this.y}}]),n}();exports.Vector=r;
},{"./constants":"FCax"}],"UnzX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vertex=void 0;var t=require("./vector"),e=require("./constants");function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var r=function(){function n(t,e){i(this,n),this.x=t,this.y=e}return s(n,[{key:"dot",value:function(t){return this.x*t.x+t.y*this.y}},{key:"cross",value:function(t){return this.x*t.y-t.x*this.y}},{key:"scale",value:function(t){this.x=this.x*t,this.y=this.y*t}},{key:"distToSq",value:function(t){return(t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y)}},{key:"distTo",value:function(t){return Math.sqrt(this.distToSq(t))}},{key:"angleTo",value:function(t){return Math.atan2(t.y-this.y,t.x-this.x)*e.toDeg}},{key:"vectorTo",value:function(e){return new t.Vector(e.x-this.x,e.y-this.y)}},{key:"rotate",value:function(t,i){i=i||new n(0,0),t*=e.toRad;var s=Math.cos(t)*(this.x-i.x)-Math.sin(t)*(this.y-i.y)+i.x,r=Math.sin(t)*(this.x-i.x)+Math.cos(t)*(this.y-i.y)+i.y;this.x=s,this.y=r}},{key:"translate",value:function(e,i){e instanceof t.Vector?(this.x=this.x+e.x,this.y=this.y+e.y):(this.x=this.x+e,this.y=i?this.y+i:this.y)}},{key:"isAbove",value:function(t){return t.mid().vectorTo(this).dot(t.normal())>1}},{key:"areColinear",value:function(t,e){return this.x*(t.y-e.y)+t.x*(e.y-this.y)+e.x*(this.y-t.y)<.2}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e}}]),n}();exports.Vertex=r;
},{"./vector":"R1yr","./constants":"FCax"}],"I6s8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Line=void 0;var t=require("./vertex"),e=require("./vector");function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var i=0;i<e.length;i++){var v=e[i];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(t,v.key,v)}}function n(t,e,i){return e&&v(t.prototype,e),i&&v(t,i),t}var r=function(){function v(t,e){i(this,v),this.v1=t,this.v2=e}return n(v,[{key:"normal",value:function(){return new e.Vector(-1*(this.v2.y-this.v1.y),this.v2.x-this.v1.x)}},{key:"mid",value:function(){return new t.Vertex(.5*(this.v2.x+this.v1.x),.5*(this.v2.y+this.v1.y))}},{key:"lenSq",value:function(){return this.v1.distToSq(this.v2)}},{key:"len",value:function(){return Math.sqrt(this.lenSq())}},{key:"angle",value:function(){return this.v1.angleTo(this.v2)}},{key:"rotate",value:function(t,e){e=e||this.mid(),this.v1.rotate(t,e),this.v2.rotate(t,e)}},{key:"translate",value:function(t,e){this.v1.translate(t,e),this.v2.translate(t,e)}},{key:"intersect",value:function(e){var i=(e.v2.x-e.v1.x)*(this.v1.y-this.v2.y)-(this.v1.x-this.v2.x)*(e.v2.y-e.v1.y);if(0===i)return null;var v=((e.v1.y-e.v2.y)*(this.v1.x-e.v1.x)+(e.v2.x-e.v1.x)*(this.v1.y-e.v1.y))/i,n=((this.v1.y-this.v2.y)*(this.v1.x-e.v1.x)+(this.v2.x-this.v1.x)*(this.v1.y-e.v1.y))/i;return 0<=v&&v<=1&&0<=n&&n<=1?new t.Vertex(this.v1.x+v*(this.v2.x-this.v1.x),this.v1.y+v*(this.v2.y-this.v1.y)):null}}]),v}();exports.Line=r;
},{"./vertex":"UnzX","./vector":"R1yr"}],"BzbB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Polygon=void 0;var t=require("./vertex"),i=require("./vector"),s=require("./line");function n(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=e(t))){var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,r=!0,h=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){h=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(h)throw o}}}}function e(t,i){if(t){if("string"==typeof t)return o(t,i);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?o(t,i):void 0}}function o(t,i){(null==i||i>t.length)&&(i=t.length);for(var s=0,n=new Array(i);s<i;s++)n[s]=t[s];return n}function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function h(t,i){for(var s=0;s<i.length;s++){var n=i[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,i,s){return i&&h(t.prototype,i),s&&h(t,s),t}var p=function(){function e(i){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r(this,e),this.area=0,this.perimeter=0,this.Ix=0,this.Iy=0,this.Iz=0,this.centroid=new t.Vertex(0,0),i[i.length-1].equals(i[0])&&i.pop(),this.points=i,s?(this._initLight(),this.update(),this.area<0&&console.error("Polygon must be defined counterclockwise"),this.init()):this._initLight()}return a(e,[{key:"init",value:function(){this.area=0,this.perimeter=0,this.Ix=0,this.Iy=0,this.Iz=0;for(var t=this.points.length-1,i=0;i<this.points.length;i++){this.area+=this.points[t].x*this.points[i].y-this.points[i].x*this.points[t].y,this.perimeter+=this.points[t].distTo(this.points[i]);var s=this.points[t].x*this.points[i].y-this.points[i].x*this.points[t].y,n=this.points[t].x*this.points[t].x+this.points[t].x*this.points[i].x+this.points[i].x*this.points[i].x,e=this.points[t].y*this.points[t].y+this.points[t].y*this.points[i].y+this.points[i].y*this.points[i].y;this.Ix+=s*e,this.Iy+=s*n,t=i}this.area=-.5*this.area,this.Ix=-1/12*this.Ix,this.Iy=-1/12*this.Iy,this.Ix=this.Ix-this.area*(this.centroid.y*this.centroid.y),this.Iy=this.Iy-this.area*(this.centroid.x*this.centroid.x),this.Iz=this.Ix+this.Iy}},{key:"update",value:function(){this.centroid.x=0,this.centroid.y=0,this.normals=[];for(var s=this.points.length-1,n=0;n<this.points.length;n++){this.centroid.x+=(this.points[s].x+this.points[n].x)*(this.points[s].x*this.points[n].y-this.points[n].x*this.points[s].y),this.centroid.y+=(this.points[s].y+this.points[n].y)*(this.points[s].x*this.points[n].y-this.points[n].x*this.points[s].y);var e=this.points[n].x-this.points[s].x,o=this.points[n].y-this.points[s].y,r=new i.Vector(-o,e).normalize();this.normals.push({point:new t.Vertex(.5*(this.points[s].x+this.points[n].x),.5*(this.points[s].y+this.points[n].y)),normal:r}),s=n}var h=-1/(6*this.area);this.centroid.x=h*this.centroid.x,this.centroid.y=h*this.centroid.y}},{key:"translate",value:function(t,i){var s,e=n(this.points);try{for(e.s();!(s=e.n()).done;){s.value.translate(t,i)}}catch(o){e.e(o)}finally{e.f()}this.update()}},{key:"rotate",value:function(t,i){i=i||this.centroid;var s,e=n(this.points);try{for(e.s();!(s=e.n()).done;){s.value.rotate(t,i)}}catch(o){e.e(o)}finally{e.f()}this.update()}},{key:"intersect",value:function(i){for(var n=[],e=this.points.length-1,o=0;o<this.points.length;o++){var r=i.intersect(new s.Line(new t.Vertex(this.points[e].x,this.points[e].y),new t.Vertex(this.points[o].x,this.points[o].y)));r&&n.push(r),e=o}return n.length>0?n:null}},{key:"divide",value:function(i){var s=this.intersect(i);if(s){for(var n=this.points[0].isAbove(i),o=[],r=(this.points.length,0);r<this.points.length;r++){var h=this.points[r].isAbove(i);if(h===n)h&&o.push(new t.Vertex(this.points[r].x,this.points[r].y));else{var a=this.points[r].areColinear(this.points[r-1],s[0])?0:1;o.push(s[a]),s.splice(a,1),h&&o.push(new t.Vertex(this.points[r].x,this.points[r].y)),n=!n}}return s.length>0&&o.push(s[0]),new e(o,!1)}}},{key:"project",value:function(t){for(var i={min:1/0,max:-1/0,min_index:0,max_index:0},s=0;s<this.points.length;s++){var n=this.points[s].dot(t);n>i.max&&(i.max=n,i.max_index=s),n<i.min&&(i.min=n,i.min_index=s)}return i}},{key:"containsPoint",value:function(i){var n=new s.Line(i,new t.Vertex(i.x+500,i.y)),e=this.intersect(n);if(e)return e.length%2!=0}},{key:"_initLight",value:function(){this.area=0,this.centroid.x=0,this.centroid.y=0,this.perimeter=0;for(var t=this.points.length-1,i=0;i<this.points.length;i++)this.area+=this.points[t].x*this.points[i].y-this.points[i].x*this.points[t].y,this.centroid.x+=(this.points[t].x+this.points[i].x)*(this.points[t].x*this.points[i].y-this.points[i].x*this.points[t].y),this.centroid.y+=(this.points[t].y+this.points[i].y)*(this.points[t].x*this.points[i].y-this.points[i].x*this.points[t].y),this.perimeter+=this.points[t].distTo(this.points[i]),t=i;this.area=-.5*this.area;var s=-1/(6*this.area);this.centroid.x=s*this.centroid.x,this.centroid.y=s*this.centroid.y}}]),e}();exports.Polygon=p;
},{"./vertex":"UnzX","./vector":"R1yr","./line":"I6s8"}],"COoq":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Force=void 0;var r=function(){function t(o,r){e(this,t),this.force=o,this.location=r}return o(t,[{key:"momentAbout",value:function(e){return e.vectorTo(this.location).cross(this.force)}}]),t}();exports.Force=r;
},{}],"M1uL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOverlap=r,exports.SAT=e;var n=require("./vertex");function r(n,r){var e=null;return n.min>=r.min&&n.min<=r.max&&n.max>=r.max?e={overlap:Math.abs(r.max-n.min),point_ind:r.max_index}:n.min<=r.min&&n.max>=r.min&&n.max<=r.max?e={overlap:Math.abs(n.max-r.min),point_ind:r.min_index}:(n.min<r.min&&n.max>r.max||r.min<n.min&&r.max>n.max)&&(e={overlap:9999,point_ind:0}),e}function e(e,a){for(var i=1/0,o=null,t=null,m=null,l=0;l<e.normals.length;l++){var x=e.normals[l].normal,p=r(e.project(x),a.project(x));if(!p)return;p.overlap<i&&(i=p.overlap,o=x,t=p.point_ind,m=a)}for(var v=0;v<a.normals.length;v++){var s=a.normals[v].normal,d=e.project(s),u=r(a.project(s),d);if(!u)return;u.overlap<i&&(i=u.overlap,o=s,t=u.point_ind,m=e)}return((e.centroid.x-a.centroid.x)*o.x<0||(e.centroid.y-a.centroid.y)*o.y<0)&&(o.x=-1*o.x,o.y=-1*o.y),{distance:i,normal:o,point:new n.Vertex(m.points[t].x,m.points[t].y)}}
},{"./vertex":"UnzX"}],"uADg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.World=void 0;var n=require("./force"),e=require("./vector"),r=require("./sat");function t(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=o(n))){var e=0,r=function(){};return{s:r,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var t,i,a=!0,l=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var n=t.next();return a=n.done,n},e:function(n){l=!0,i=n},f:function(){try{a||null==t.return||t.return()}finally{if(l)throw i}}}}function o(n,e){if(n){if("string"==typeof n)return i(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(n,e):void 0}}function i(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function a(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function l(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function c(n,e,r){return e&&l(n.prototype,e),r&&l(n,r),n}var s=function(){function r(){a(this,r),this.bodies=new Map,this.waterline=null}return c(r,[{key:"update",value:function(r){var o,i=new e.Vector(0,9.81),a=t(this.bodies.values());try{for(a.s();!(o=a.n()).done;){var l=o.value;l.calculateBouyancy(this.waterline),l.forces.set("gravity",new n.Force(i.scale(1*l.mass),l.polygon.centroid)),l.update(r);var c,s=t(this.bodies.values());try{for(s.s();!(c=s.n()).done;){var y=c.value;l!==y&&v(l,y)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){a.e(u)}finally{a.f()}}}]),r}();function v(n,t){var o=(0,r.SAT)(n.polygon,t.polygon);if(o){var i=new e.Vector(o.point.x-n.polygon.centroid.x,o.point.y-n.polygon.centroid.y),a=new e.Vector(o.point.x-t.polygon.centroid.x,o.point.y-t.polygon.centroid.y),l=new e.Vector(n.velocity.x-n.angular_velocity*i.y,n.velocity.y+n.angular_velocity*i.x),c=new e.Vector(t.velocity.x-t.angular_velocity*a.y,t.velocity.y+t.angular_velocity*a.x),s=new e.Vector(c.x-l.x,c.y-l.y),v=s.dot(o.normal),y=i.cross(o.normal);y=y*y*n.inv_inertia;var u=a.cross(o.normal);u=u*u*t.inv_inertia;var f=-1.01*v;f/=n.inv_mass+t.inv_mass+y+u;var m=new e.Vector(o.normal.x*f,o.normal.y*f);n.velocity=new e.Vector(n.velocity.x-n.inv_mass*m.x,n.velocity.y-n.inv_mass*m.y),t.velocity=new e.Vector(t.velocity.x+t.inv_mass*m.x,t.velocity.y+t.inv_mass*m.y),n.angular_velocity-=n.inv_inertia*i.cross(m),t.angular_velocity+=t.inv_inertia*a.cross(m);var _=new e.Vector(s.x-v*o.normal.x,s.y-v*o.normal.y).normalize(),p=i.cross(_);p=p*p*n.inv_inertia;var d=a.cross(_);d=d*d*t.inv_inertia;var x=-1.01*s.dot(_);x/=n.inv_mass+t.inv_mass+y+u;var w=new e.Vector(_.x*x,_.y*x);n.velocity=new e.Vector(n.velocity.x-n.inv_mass*w.x,n.velocity.y-n.inv_mass*w.y),t.velocity=new e.Vector(t.velocity.x+t.inv_mass*w.x,t.velocity.y+t.inv_mass*w.y),n.angular_velocity-=n.inv_inertia*i.cross(w),t.angular_velocity+=t.inv_inertia*a.cross(w);var g=Math.max(o.distance-.01,0)/(n.inv_mass+t.inv_mass),b=new e.Vector(.8*o.normal.x*g,.8*o.normal.y*g);n.polygon.translate(new e.Vector(1*b.x*n.inv_mass,1*b.y*n.inv_mass)),t.polygon.translate(new e.Vector(-1*b.x*t.inv_mass,-1*b.y*t.inv_mass))}}exports.World=s;
},{"./force":"COoq","./vector":"R1yr","./sat":"M1uL"}],"wGZN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Body=void 0;var t=require("./vector"),e=require("./force"),i=require("./constants");function n(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=r(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}var l=function(){function r(e,i){a(this,r),this.polygon=e,this.mass=i||this.polygon.area,this.inv_mass=1/this.mass,this.inertia=this.polygon.Iz*(this.mass/this.polygon.area),this.inv_inertia=1/this.inertia,this.velocity=new t.Vector(0,0),this.acceleration=new t.Vector(0,0),this.angular_velocity=0,this.angular_acceleration=0,this.forces=new Map,this.moments=new Map,this.kinematic=!1,this.trackingMouse=!1}return c(r,[{key:"update",value:function(t){this.applyForces(),this.updateMovement(t)}},{key:"updateMovement",value:function(e){this.velocity=new t.Vector(this.velocity.x+this.acceleration.x*e,this.velocity.y+this.acceleration.y*e),this.polygon.translate(this.velocity.x*e,this.velocity.y*e),this.angular_velocity+=this.angular_acceleration*e,this.polygon.rotate(this.angular_velocity*e*i.toDeg)}},{key:"applyForces",value:function(){if(this.acceleration.x=0,this.acceleration.y=0,this.angular_acceleration=0,!this.kinematic){var t,e=n(this.forces.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;this.angular_acceleration+=i.momentAbout(this.polygon.centroid),this.acceleration=this.acceleration.add(i.force)}}catch(s){e.e(s)}finally{e.f()}var r,o=n(this.moments.values());try{for(o.s();!(r=o.n()).done;){var a=r.value;this.angular_acceleration+=a}}catch(s){o.e(s)}finally{o.f()}this.acceleration=this.acceleration.scale(1/this.mass),this.angular_acceleration/=this.inertia}}},{key:"calculateBouyancy",value:function(i){if(i){var n=this.polygon.divide(i);if(!n&&this.polygon.centroid.isAbove(i))n=this.polygon;else if(!n)return this.forces.delete("bouyancy"),this.forces.delete("drag"),void this.moments.delete("drag");var r=n.centroid;r.x=Math.abs(r.x-this.polygon.centroid.x)>.01?r.x:this.polygon.centroid.x;var o=new t.Vector(0,-1).scale(1.025*n.area*9.81),a=new e.Force(o,r);this.forces.set("bouyancy",a);var s=this.velocity.y>0?-1:1,c=new t.Vector(0,s).scale(.5*n.perimeter*.65*1.025*(this.velocity.y*this.velocity.y)),l=new e.Force(c,this.polygon.centroid);this.forces.set("drag",l);var h=-.45*this.angular_velocity;this.moments.set("drag",h*this.inertia)}}}]),r}();exports.Body=l;
},{"./vector":"R1yr","./force":"COoq","./constants":"FCax"}],"KqmS":[function(require,module,exports) {
"use strict";var e=u(require("./graphics")),t=require("./polygon"),n=require("./vertex"),r=require("./line"),o=require("./world"),i=require("./body"),a=require("./vector");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function c(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=f(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function f(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=document.getElementById("canvas"),d=s.getContext("2d");e.initialize(d);var w=[new n.Vertex(0,0),new n.Vertex(0,50),new n.Vertex(150,50),new n.Vertex(150,0),new n.Vertex(100,0),new n.Vertex(0,0)],v=new t.Polygon(w);v.translate(155,220),v.rotate(15);var p=new i.Body(v,3500);p.kinematic=!1;var g=[new n.Vertex(0,0),new n.Vertex(0,25),new n.Vertex(50,25),new n.Vertex(50,0)],b=new t.Polygon(g);b.translate(170,130);var m=new i.Body(b,250);m.kinematic=!1;var x=[new n.Vertex(0,0),new n.Vertex(0,25),new n.Vertex(50,25),new n.Vertex(50,0)],V=new t.Polygon(x);V.translate(240,100);var h=new i.Body(V,750),O=new r.Line(new n.Vertex(0,300),new n.Vertex(600,300)),j=new o.World;function k(){d.fillStyle="lightskyblue",d.fillRect(0,0,600,300),d.fillStyle="navy",d.fillRect(0,300,600,200),j.update(.025),e.draw_polygon(p.polygon,{debug:!1}),e.draw_line(j.waterline,{strokeStyle:"dodgerblue"}),window.requestAnimationFrame(k)}function q(e,t){var r=e.getBoundingClientRect();return new n.Vertex(t.clientX-r.left,t.clientY-r.top)}j.bodies.set("1",p),j.waterline=O,window.requestAnimationFrame(k),s.addEventListener("mousedown",function(e){var t,n=q(s,e),r=c(j.bodies.values());try{for(r.s();!(t=r.n()).done;){var o=t.value;o.polygon.containsPoint(n)&&(o.trackingMouse=!0)}}catch(i){r.e(i)}finally{r.f()}}),s.addEventListener("mouseup",function(e){var t,n=c(j.bodies.values());try{for(n.s();!(t=n.n()).done;){t.value.trackingMouse=!1}}catch(r){n.e(r)}finally{n.f()}}),s.addEventListener("mousemove",function(e){var t,n=c(j.bodies.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.trackingMouse){var o=q(s,e),i=new a.Vector(2*(o.x-r.polygon.centroid.x),2*(o.y-r.polygon.centroid.y));r.velocity=i}}}catch(l){n.e(l)}finally{n.f()}});
},{"./graphics":"cMOQ","./polygon":"BzbB","./vertex":"UnzX","./line":"I6s8","./world":"uADg","./body":"wGZN","./vector":"R1yr"}]},{},["KqmS"], null)
//# sourceMappingURL=/2d-bouyancy-sim/scripts.ae2790f8.js.map